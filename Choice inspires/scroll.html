<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Corrected GSAP Scroll Demo</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        /* --- Basic Setup --- */
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: 'Poppins', sans-serif;
            background-color: #111;
            color: #f0f0f0;
            overflow-x: hidden;
        }

        h1 { font-size: 3.5rem; font-weight: 700; }
        h2 { font-size: 2.5rem; font-weight: 600; }
        p { font-size: 1.1rem; max-width: 600px; line-height: 1.6; }

        /* --- Default Centered Section Styling --- */
        /* This is used for the top, middle, and bottom sections */
        .section {
            position: relative;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 40px;
        }

        .hero-section { background-color: #1a1a2e; }

        /* --- Horizontal Scroll Section (THE FIX IS HERE) --- */
        /* This container is now simpler. It ONLY defines height and overflow. */
        /* It no longer uses flexbox to center its content. */
        .horizontal-scroll-section {
            position: relative;
            height: 100vh;
            overflow: hidden;
        }

        .panels-container {
            width: 400%; 
            height: 100vh;
            display: flex;
            flex-wrap: nowrap;
        }
        
        .panel {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 40px;
            flex-shrink: 0; 
        }
        
        .panel.p-one { background-color: #0f3460; }
        .panel.p-two { background-color: #533483; }
        .panel.p-three { background-color: #e94560; }
        .panel.p-four { background-color: #16213e; color: #e94560; }

        /* --- Other Sections --- */
        .reveal-section { background-color: #0c0c14; }
        .reveal-container { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; }
        .reveal-item {
            background-color: #1a1a2e;
            padding: 30px;
            border-radius: 15px;
            width: 300px;
            opacity: 0;
            transform: translateY(50px);
        }
        .final-section { background-color: #e94560; color: #111; }
    </style>
</head>
<body>
    <main>
        <section class="section hero-section">
            <h1>The GSAP Scroll Experience</h1>
            <p>Scroll down to see the magic happen. The next section demonstrates a pinned container with horizontal scrolling.</p>
        </section>

        <section class="horizontal-scroll-section">
            <div class="panels-container">
                <div class="panel p-one"><h2>Panel One</h2><p>This panel now fills the screen correctly at the start.</p></div>
                <div class="panel p-two"><h2>Panel Two</h2><p>This is powered by GSAP's ScrollTrigger plugin.</p></div>
                <div class="panel p-three"><h2>Panel Three</h2><p>We pin the main container and animate the x-position.</p></div>
                <div class="panel p-four"><h2>Last Panel</h2><p>Scroll past this section to see more animations.</p></div>
            </div>
        </section>

        <section class="section reveal-section">
            <h2>Reveal on Scroll</h2>
            <p>These elements animate into view as you scroll to them.</p>
            <div class="reveal-container">
                <div class="reveal-item"><h3>Feature 1</h3><p>Each item has its own trigger.</p></div>
                <div class="reveal-item"><h3>Feature 2</h3><p>They fade and slide in gracefully.</p></div>
                <div class="reveal-item"><h3>Feature 3</h3><p>This is a very common web effect.</p></div>
            </div>
        </section>

        <section class="section final-section">
            <h1>You've Reached The End</h1>
            <p>This demo shows just a fraction of what's possible with GSAP.</p>
        </section>
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

    <script>
        gsap.registerPlugin(ScrollTrigger);
        const panels = gsap.utils.toArray(".panel");
        gsap.to(".panels-container", {
            xPercent: -100 * (panels.length - 1),
            ease: "none",
            scrollTrigger: {
                trigger: ".horizontal-scroll-section",
                pin: true,
                scrub: 1,
                snap: 1 / (panels.length - 1),
                end: () => "+=" + (document.querySelector(".panels-container").offsetWidth - window.innerWidth)
            }
        });
        const revealItems = gsap.utils.toArray(".reveal-item");
        revealItems.forEach(item => {
            gsap.fromTo(item, 
                { opacity: 0, y: 50 }, 
                { opacity: 1, y: 0, duration: 1, ease: "power2.out",
                    scrollTrigger: {
                        trigger: item,
                        start: "top 85%",
                        toggleActions: "play none none reverse"
                    }
                }
            );
        });
    </script>
</body>
</html>

***

### What Was Changed and Why

1.  **HTML Change:** In the `<section>` for the horizontal scroll, the class `section` was **removed**. It now only has the class `horizontal-scroll-section`.
2.  **CSS Change:** Because the `section` class was removed, the flexbox centering styles no longer apply to the horizontal scroll container. Its new, simpler style just sets its `height` and lets its content align naturally to the top-left.

This ensures the strip of panels starts perfectly aligned to the left, showing only **Panel One** when the section first scrolls into view. The animation then proceeds correctly from this proper starting point. This should now behave exactly as you expect.